<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Class Meeting 23 Getting Started | STAT 545 @ UBC: Class Meeting Guide 2019/20</title>
  <meta name="description" content="Class Meeting 23 Getting Started | STAT 545 @ UBC: Class Meeting Guide 2019/20" />
  <meta name="generator" content="bookdown 0.11 and GitBook 2.6.7" />

  <meta property="og:title" content="Class Meeting 23 Getting Started | STAT 545 @ UBC: Class Meeting Guide 2019/20" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="stat-545.png" />
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Class Meeting 23 Getting Started | STAT 545 @ UBC: Class Meeting Guide 2019/20" />
  
  
  <meta name="twitter:image" content="stat-545.png" />

<meta name="author" content="Vincenzo Coia and Firas Moosvi" />


<meta name="date" content="2019-08-31" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="class-meetings-5-and-6-r-packages.html">
<link rel="next" href="class-meeting-06.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">STAT 545 @ UBC 2019-20</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About This Guide</a></li>
<li class="chapter" data-level="1" data-path="introduction-to-stat-545-and-github.html"><a href="introduction-to-stat-545-and-github.html"><i class="fa fa-check"></i><b>1</b> Introduction to STAT 545 and GitHub</a></li>
<li class="chapter" data-level="2" data-path="introduction-to-r.html"><a href="introduction-to-r.html"><i class="fa fa-check"></i><b>2</b> Introduction to R</a></li>
<li class="chapter" data-level="3" data-path="authoring.html"><a href="authoring.html"><i class="fa fa-check"></i><b>3</b> Authoring</a></li>
<li class="chapter" data-level="4" data-path="the-version-control-workflow.html"><a href="the-version-control-workflow.html"><i class="fa fa-check"></i><b>4</b> The version control workflow</a></li>
<li class="chapter" data-level="5" data-path="intro-to-data-wrangling-part-i.html"><a href="intro-to-data-wrangling-part-i.html"><i class="fa fa-check"></i><b>5</b> Intro to data wrangling, Part I</a></li>
<li class="chapter" data-level="6" data-path="intro-to-data-wrangling-part-ii.html"><a href="intro-to-data-wrangling-part-ii.html"><i class="fa fa-check"></i><b>6</b> Intro to data wrangling, Part II</a></li>
<li class="chapter" data-level="7" data-path="introduction-to-plotting-with-ggplot2-part-i.html"><a href="introduction-to-plotting-with-ggplot2-part-i.html"><i class="fa fa-check"></i><b>7</b> Introduction to plotting with <code>ggplot2</code>, Part I</a></li>
<li class="chapter" data-level="8" data-path="introduction-to-plotting-with-ggplot2-part-ii.html"><a href="introduction-to-plotting-with-ggplot2-part-ii.html"><i class="fa fa-check"></i><b>8</b> Introduction to plotting with <code>ggplot2</code>, Part II</a></li>
<li class="chapter" data-level="9" data-path="tidy-data-and-pivoting.html"><a href="tidy-data-and-pivoting.html"><i class="fa fa-check"></i><b>9</b> Tidy Data and Pivoting</a></li>
<li class="chapter" data-level="10" data-path="joining-two-tables.html"><a href="joining-two-tables.html"><i class="fa fa-check"></i><b>10</b> Joining Two Tables</a></li>
<li class="chapter" data-level="11" data-path="advanced-r-programming.html"><a href="advanced-r-programming.html"><i class="fa fa-check"></i><b>11</b> Advanced R programming</a></li>
<li class="chapter" data-level="12" data-path="be-the-boss-of-your-factors.html"><a href="be-the-boss-of-your-factors.html"><i class="fa fa-check"></i><b>12</b> Be the Boss of your Factors</a></li>
<li class="chapter" data-level="13" data-path="effective-plotting.html"><a href="effective-plotting.html"><i class="fa fa-check"></i><b>13</b> Effective Plotting</a></li>
<li class="chapter" data-level="14" data-path="the-model-fitting-paradigm-in-r.html"><a href="the-model-fitting-paradigm-in-r.html"><i class="fa fa-check"></i><b>14</b> The Model-Fitting Paradigm in R</a></li>
<li class="chapter" data-level="15" data-path="today-2.html"><a href="today-2.html"><i class="fa fa-check"></i><b>15</b> Today</a></li>
<li class="chapter" data-level="16" data-path="resources-10.html"><a href="resources-10.html"><i class="fa fa-check"></i><b>16</b> Resources</a></li>
<li class="chapter" data-level="17" data-path="break.html"><a href="break.html"><i class="fa fa-check"></i><b>17</b> Break</a></li>
<li class="chapter" data-level="18" data-path="deep-thoughts-about-data-analytic-work.html"><a href="deep-thoughts-about-data-analytic-work.html"><i class="fa fa-check"></i><b>18</b> Deep Thoughts about Data Analytic Work</a></li>
<li class="chapter" data-level="" data-path="stat-547m.html"><a href="stat-547m.html"><i class="fa fa-check"></i>STAT 547M</a></li>
<li class="chapter" data-level="19" data-path="class-meeting-02-be-the-boss-of-your-character-data.html"><a href="class-meeting-02-be-the-boss-of-your-character-data.html"><i class="fa fa-check"></i><b>19</b> Class Meeting 02: Be the boss of your character data</a></li>
<li class="chapter" data-level="20" data-path="class-meeting-03-repetition-with-purrr.html"><a href="class-meeting-03-repetition-with-purrr.html"><i class="fa fa-check"></i><b>20</b> Class Meeting 03: Repetition with <code>purrr</code></a></li>
<li class="chapter" data-level="21" data-path="class-meeting-04-purrr-and-list-columns.html"><a href="class-meeting-04-purrr-and-list-columns.html"><i class="fa fa-check"></i><b>21</b> Class Meeting 04: <code>purrr</code> and List Columns</a></li>
<li class="chapter" data-level="22" data-path="class-meetings-5-and-6-r-packages.html"><a href="class-meetings-5-and-6-r-packages.html"><i class="fa fa-check"></i><b>22</b> Class Meetings 5 and 6: R Packages</a></li>
<li class="chapter" data-level="23" data-path="getting-started-3.html"><a href="getting-started-3.html"><i class="fa fa-check"></i><b>23</b> Getting Started</a></li>
<li class="chapter" data-level="24" data-path="class-meeting-06.html"><a href="class-meeting-06.html"><i class="fa fa-check"></i><b>24</b> Class Meeting 06:</a></li>
<li class="chapter" data-level="25" data-path="class-meeting-07.html"><a href="class-meeting-07.html"><i class="fa fa-check"></i><b>25</b> Class Meeting 07:</a></li>
<li class="chapter" data-level="26" data-path="class-meeting-08.html"><a href="class-meeting-08.html"><i class="fa fa-check"></i><b>26</b> Class Meeting 08:</a></li>
<li class="chapter" data-level="27" data-path="class-meeting-09-automation.html"><a href="class-meeting-09-automation.html"><i class="fa fa-check"></i><b>27</b> Class Meeting 09: Automation</a></li>
<li class="chapter" data-level="28" data-path="non-interactive-programming.html"><a href="non-interactive-programming.html"><i class="fa fa-check"></i><b>28</b> Non-interactive programming</a></li>
<li class="chapter" data-level="29" data-path="class-meeting-10-automation-part-ii.html"><a href="class-meeting-10-automation-part-ii.html"><i class="fa fa-check"></i><b>29</b> Class Meeting 10: Automation, Part II</a></li>
<li class="chapter" data-level="30" data-path="class-meeting-11-getting-data-from-the-web-part-1.html"><a href="class-meeting-11-getting-data-from-the-web-part-1.html"><i class="fa fa-check"></i><b>30</b> Class Meeting 11: Getting Data from the Web, Part 1</a></li>
<li class="chapter" data-level="31" data-path="class-meeting-12-getting-data-from-the-web-part-2-apis.html"><a href="class-meeting-12-getting-data-from-the-web-part-2-apis.html"><i class="fa fa-check"></i><b>31</b> Class Meeting 12: Getting Data from the Web, Part 2: API’s</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">STAT 545 @ UBC: Class Meeting Guide 2019/20</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="getting-started-3" class="section level1">
<h1><span class="header-section-number">Class Meeting 23</span> Getting Started</h1>
<p>Install/update the <code>devtools</code> package, used as an aid in package development:</p>
<pre><code>install.packages(&quot;devtools&quot;)</code></pre>
<p>This will do for now – for development beyond the basics, you might need to <a href="http://stat545.com/packages01_system-prep.html">further configure your computer</a>.</p>
<div id="lets-start-with-a-single-function" class="section level2">
<h2><span class="header-section-number">23.1</span> Let’s start with a single function</h2>
<div id="function-creation" class="section level3">
<h3><span class="header-section-number">23.1.1</span> Function creation</h3>
<p>Follow along as we make an R package called <code>powers</code> that contains a function <code>square</code> that squares its input. Let’s initiate it:</p>
<ul>
<li>RStudio —&gt; New project —&gt; R Package
<ul>
<li>Initiate git (optional, but recommended).</li>
</ul></li>
<li>Under the “Build” menu, click “Install and Restart”</li>
<li>Check out the files that have been created
<ul>
<li>Rd</li>
<li>NAMESPACE</li>
<li>DESCRIPTION</li>
</ul></li>
</ul>
<p>Now, start a new R script in the <code>R</code> directory, called <code>square.R</code>. Write a function called <code>square</code> that squares its input.</p>
<p>Build the package:</p>
<ul>
<li><code>Build and Reload</code>, or in newer versions of RStudio, <code>Install and Restart</code>.
<ul>
<li>This compiles the package, and loads it.</li>
<li>Try leaving the project, do <code>library(powers)</code>, and use the function! Pretty cool, eh?</li>
</ul></li>
</ul>
</div>
<div id="documentation" class="section level3">
<h3><span class="header-section-number">23.1.2</span> Documentation</h3>
<p>The <code>roxygen2</code> package makes documentation easy(er). Comment package functions with <code>#'</code> above the function, and use tags starting with <code>@</code>. Let’s document the <code>square</code> function.</p>
<p>Key tags:</p>
<ul>
<li><code>@param</code> – what’s the input?</li>
<li><code>@return</code> – what’s the output?</li>
<li><code>@export</code> – make the function available upon loading the package.</li>
</ul>
<p>Type <code>document()</code> into the console (a function from the <code>devtools</code> package). Then <code>Install and Restart</code> the package.</p>
<p>Your function is now documented. Check it out with <code>?square</code>! This happens due to the creation of an <code>Rd</code> file in the <code>man</code> folder.</p>
</div>
<div id="taking-control-of-your-namespace" class="section level3">
<h3><span class="header-section-number">23.1.3</span> Taking control of your NAMESPACE</h3>
<p>Let’s start being intentional as to what appears in our NAMESPACE.</p>
<ol style="list-style-type: decimal">
<li>Delete your NAMESPACE file.</li>
<li>Add the <code>@export</code> tag to your <code>square</code> function to write it to the NAMESPACE.</li>
</ol>
<p>Things that do not get <code>@export</code>ed can still be referred to “internally” by functions in your NAMESPACE, as we’ll see soon.</p>
</div>
<div id="checking" class="section level3">
<h3><span class="header-section-number">23.1.4</span> Checking</h3>
<p>It’s a good idea to <code>check</code> your package early and often to see that everything is working.</p>
<p>Click <code>Check</code> under the <code>Build</code> menu. It checks lots of things for you! We’ll see more examples of this.</p>
</div>
<div id="function-dependencies" class="section level3">
<h3><span class="header-section-number">23.1.5</span> Function Dependencies</h3>
<p>Make another, more general function to compute any power:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pow &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">a=</span><span class="dv">2</span>) x<span class="op">^</span>a</code></pre></div>
<p>It can go in the same R script as <code>square</code>, or a different one – your choice.</p>
<p>We’ll make <code>square</code> depend on <code>pow</code>.</p>
<p>Aftering <code>Install and Restart</code>ing, you’ll notice that you can’t use <code>pow</code> because it’s not <code>export</code>ed. But, <code>square</code> still works! We call <code>pow</code> an <em>internal</em> function.</p>
<p><strong>Note</strong>: you should still document your internal function! But mention that the function is internal. Users will be able to access the documentation like normal, but still won’t be able to (easily) use the function.</p>
<p>If you want to be able to use internal functions as a developer, but don’t want users to have (easy) access to the functions, then run <code>load_all</code> instead of <code>Install and Restart</code>.</p>
</div>
<div id="your-turn" class="section level3">
<h3><span class="header-section-number">23.1.6</span> Your Turn</h3>
<p>Make and document another function, say <code>cube</code>, that raises a vector to the power of 3. Be sure to <code>@export</code> it to the NAMESPACE. Use our internal <code>pow</code> function to make <code>cube</code>, if you have it.</p>
<p>Finished early? Do more – work on Assignment 7, and/or try out more documentation features that comes with <code>roxygen2</code> (the <code>@</code> tags).</p>
</div>
</div>
<div id="documentation-and-testing" class="section level2">
<h2><span class="header-section-number">23.2</span> Documentation and Testing</h2>
<div id="more-roxygen2-documentation" class="section level3">
<h3><span class="header-section-number">23.2.1</span> More Roxygen2 Documentation</h3>
<ul>
<li><code>\code{}</code> for code font</li>
<li><code>\link{}</code> to link to other function docs</li>
<li>Combine: <code>\code{\link{function_name}}</code></li>
</ul>
<p>Enumeration:</p>
<pre><code>#&#39; \enumerate{
#&#39;      \item first item
#&#39;      \item second item
#&#39; }</code></pre>
<p>Itemization:</p>
<pre><code>#&#39; \itemize{
#&#39;      \item first item
#&#39;      \item second item
#&#39; }</code></pre>
<p>Manually labelled list:</p>
<pre><code>#&#39; \describe{
#&#39;      \item{bullet label 1}{first item}
#&#39;      \item{bullet label 2}{second item}
#&#39; }</code></pre>
</div>
<div id="description-file" class="section level3">
<h3><span class="header-section-number">23.2.2</span> DESCRIPTION file</h3>
<p>Every R package has this. It contains the package’s metadata. Let’s edit it:</p>
<ul>
<li>Add a title and brief description.
<ul>
<li>R is picky about these! Check out <a href="http://r-pkgs.had.co.nz/description.html#pkg-description">the rules</a>.</li>
</ul></li>
<li>Add your name.
<ul>
<li>Use the <a href="http://r-pkgs.had.co.nz/description.html#author"><code>Authors@R</code> field</a> instead of the default <code>Author</code> and <code>Maintainer</code> fields.</li>
</ul></li>
<li>Pick a license: next!</li>
</ul>
</div>
<div id="pick-a-license" class="section level3">
<h3><span class="header-section-number">23.2.3</span> Pick a license</h3>
<p><a href="http://kbroman.org/pkg_primer/pages/licenses.html">Karl Broman’s post</a> is brief and informative.</p>
<p>Let’s add an MIT licence.</p>
</div>
<div id="testing-with-testthat" class="section level3">
<h3><span class="header-section-number">23.2.4</span> Testing with <code>testthat</code></h3>
<p>We’ve already seen package <code>Check</code>s – this checks that the pieces of your R package are in place, and that even your examples don’t throw errors. We should not only check that our functions are <em>working</em>, but that they give us results that we’d <em>expect</em>.</p>
<p>The <code>testthat</code> package is useful for this. Initialize it in your R package by running <code>use_testthat()</code>.</p>
<p>As a template, save and edit the following script in a file called <code>test_square</code> in the <code>tests/testthat</code> folder, filling in the blanks with an <code>expect</code> statement:</p>
<pre><code>context(&quot;Squaring non-numerics&quot;)

test_that(&quot;At least numeric values work.&quot;, {
    num_vec &lt;- c(0, -4.6, 3.4)
    expect_identical(square(numeric(0)), numeric(0))
    FILL_THIS_IN
})

test_that(&quot;Logicals automatically convert to numeric.&quot;, {
    logic_vec &lt;- c(TRUE, TRUE, FALSE)
    FILL_THIS_IN
})</code></pre>
<p>Then, you can execute those tests by running <code>devtools::test()</code>, or clicking <code>Build</code> -&gt; <code>Test package</code>.</p>
<p>These sanity checks are very important as your R package becomes more complex!</p>
</div>
</div>
<div id="higher-level-user-documentation" class="section level2">
<h2><span class="header-section-number">23.3</span> Higher-level User Documentation</h2>
<div id="package-documentation" class="section level3">
<h3><span class="header-section-number">23.3.1</span> Package Documentation</h3>
<p>Just like we do for functions, we can make a manual (<code>.Rd</code>) page for our entire R package, too. For example, check out the documentation for <code>ggplot2</code>:</p>
<pre><code>?ggplot2         # Can execute only if `ggplot2` is loaded.
package?ggplot2  # Always works.</code></pre>
<p>To do so, just execute <code>use_package_doc()</code>. You’ll see a new R script come up with <code>roxygen2</code>-style documentation to <code>NULL</code>. Document as you’d do functions, and run <code>document()</code> to generate the <code>.Rd</code> file.</p>
<p>Here’s sample documentation:</p>
<pre><code>#&#39; Convenient Computation of Powers
#&#39;
#&#39; Are you tired of using the power operator, \code{^} or \code{**} in R?
#&#39; Use this package to call functions that apply common powers
#&#39; to your vectors.
#&#39;
#&#39; @name powers
#&#39; @author Me
#&#39; @note This package isn&#39;t actually meant to be serious. It&#39;s just for
#&#39; teaching purposes.
#&#39; @docType package</code></pre>
</div>
<div id="vignettes" class="section level3">
<h3><span class="header-section-number">23.3.2</span> Vignettes</h3>
<p>It’s a good idea to write a vignette (or several) for your R package to show how the package is useful as a whole. Documentation for individual functions don’t suffice for this purpose!</p>
<p>To write a vignette called <code>&quot;my_vignette&quot;</code>, just run</p>
<pre><code>use_vignette(&quot;my_vignette&quot;)</code></pre>
<p>Some things happen automatically, but it’s up to you to modify the <code>.Rmd</code> document to provide adequate instruction. Change the template to suit your package. The only real “catch” to doing this is <em>making sure the title is replaced in both instances</em>.</p>
<p>Then just <code>Knit</code>, and then run <code>build_vignettes()</code> to build the vignettes.</p>
<p><strong>Vignette woes</strong>: There seems to be resistance against building vignettes when installing. Try running <code>install(build_vignettes=TRUE)</code> to get it working.</p>
</div>
<div id="readme" class="section level3">
<h3><span class="header-section-number">23.3.3</span> README</h3>
<p>Just as most projects should have a <code>README</code> file in the main directory, so should an R package.</p>
<p><strong>Purposes</strong>:</p>
<ul>
<li>Inform someone stumbling across your project what they’ve stumbled across.
<ul>
<li>At a high level (like “This is an R package”), but also</li>
<li>somewhat at a lower level too, like your description file. This becomes a little redundant.</li>
</ul></li>
<li>I like to use the README to inform <em>developers</em> the main workflow and spirit behind <em>developing</em> the package.
<ul>
<li>There are some things that you’d want other potential developers to know about the package as a whole, yet are irrelevant to users!</li>
</ul></li>
</ul>
<p><strong>How to do it</strong>:</p>
<p>You could just make and edit a <code>README.md</code> file like normal. But you’ll probably want to briefly demonstrate some code, so you’ll need an <code>.Rmd</code>. Let <code>devtools</code> set that up for you:</p>
<pre><code>use_readme_rmd()</code></pre>
<p><code>knit</code> and you’re done!</p>
</div>
<div id="exercises" class="section level3">
<h3><span class="header-section-number">23.3.4</span> Exercises</h3>
<p>Create the above three types of documentation, without looking at <a href="https://github.com/vincenzocoia/powers">my version</a>. Then compare.</p>
<p>Ideally, you’ll have more to document because you’ve been working on expanding this (or another) R package for Homework 07 already.</p>
</div>
</div>
<div id="adding-data-to-your-r-package" class="section level2">
<h2><span class="header-section-number">23.4</span> Adding data to your R package</h2>
<p>You can store <em>and document</em> datasets within R packages. Here’s one useful way.</p>
<p><strong>Note</strong>: This currently doesn’t seem to be present in the companion tutorial from Jenny. Check out <a href="http://r-pkgs.had.co.nz/data.html">the R Packages “data chapter”</a> for a resource.</p>
<p><strong>Example</strong>:</p>
<p>Let’s add <code>tenvec</code> and <code>tendf</code> to the package:</p>
<pre><code>tenvec &lt;- 1:10
tendf &lt;- data.frame(vec=1:10)</code></pre>
<p>In the console:</p>
<ol style="list-style-type: decimal">
<li>Store your data as R objects, as we’ve done above with <code>tenvec</code> and <code>tendf</code>.</li>
<li>Execute <code>use_data(tenvec, tendf)</code> (one argument per object).</li>
</ol>
<p><code>tenvec</code> and <code>tendf</code> will be saved as <code>.Rdata</code> files in the new <code>/data</code> directory. These are available upon loading the package.</p>
<p>To document the data, for each object (i.e., for each of <code>tenvec</code> and <code>tendf</code>), put <code>roxygen2</code>-style documentation above <em>the character</em> <code>&quot;tenvec&quot;</code> and <code>&quot;tendf&quot;</code> in an R script in the <code>/R</code> folder.</p>
<p>Example for <code>tenvec</code>:</p>
<pre><code>#&#39; Integer vector from 1 to 10
#&#39;
#&#39; Self-explanatory! 
#&#39;
#&#39; @format What format does you data take? Integer vector.
#&#39; @source Where did the data come from? 
&quot;tenvec&quot;</code></pre>
<p>The <code>@format</code> and <code>@source</code> tags are unique to data documentation. Note that you shouldn’t use the <code>@export</code> tag when documenting data!</p>
</div>
<div id="dependencies" class="section level2">
<h2><span class="header-section-number">23.5</span> Dependencies</h2>
<p>We can use functions from other R packages within our homemade R package, too. We need to do two things:</p>
<ul>
<li>Use the syntax <code>package_name::function_name()</code> whenever you want to use <code>function_name</code> from <code>package_name</code>.</li>
<li>Indicate that your R package depends on <code>package_name</code> in the DESCRIPTION file by executing the command <code>use_package(&quot;package_name&quot;)</code>.</li>
</ul>
<p>There are other methods, but this is the easiest.</p>
<p><strong>Example</strong>: Add <code>ggplot2</code> dependency to plot the resulting computations. Do so by adding a plot to <code>pow</code> – change <code>pow</code>’s guts to the following:</p>
<pre><code>res &lt;- x^p
if (showplot) {
    p &lt;- ggplot2::qplot(x, res)
    print(p)
}
res</code></pre>
<p><strong>Note 1</strong>: Here’s an example of the benefits of not having your functions do too much – I only needed to change <code>pow</code> alone to get the changes to work for <code>square</code> and <code>cube</code>.</p>
<p><strong>Note 2</strong>: It’s probably better to use Base R’s plotting here, so that your package is as stand-alone as possible. We use <code>ggplot2</code> for expository purposes.</p>
</div>
<div id="launching-your-package-to-github" class="section level2">
<h2><span class="header-section-number">23.6</span> Launching your Package to GitHub</h2>
<p>If I want to put an R package on GitHub, I typically just:</p>
<ol style="list-style-type: decimal">
<li>Click “New” in GitHub to make a new repo. Don’t initialize with README.</li>
<li>Follow the instructions github provides, which involves two lines to execute in the terminal.
<ul>
<li>Those two lines can be found <a href="http://happygitwithr.com/existing-github-last.html#connect-to-github">here</a> in Jenny’s Happy git book.</li>
</ul></li>
</ol>
<p>There is also the <a href="http://stat545.com/packages06_foofactors-package.html#use_github()"><code>use_github()</code> way</a> – although, to me, it seems overly complicated (perhaps there’s an advantage I don’t know about). It’s just a matter of following the instructions, which are not worth demonstrating here.</p>
</div>
<div id="time-remaining" class="section level2">
<h2><span class="header-section-number">23.7</span> Time remaining?</h2>
<p>If there’s time remaining, we’ll check out <a href="http://adv-r.had.co.nz/OO-essentials.html#s3">S3 OO programming</a> in R.</p>
<ol style="list-style-type: decimal">
<li>Add a “class” to the output of <code>pow</code>.</li>
<li>Add some methods:</li>
</ol>
<pre><code>print.pow &lt;- function(x) {
    cat(paste(&quot;Object of class &#39;pow&#39;,&quot;, head(x)))
    invisible()
}

#&#39; @export
bind.pow &lt;- function(x) paste(x, collapse=&quot;.&quot;)

bind &lt;- function(x) UseMethod(&quot;bind&quot;)</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="class-meetings-5-and-6-r-packages.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="class-meeting-06.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/STAT545-UBC/Classroom/edit/master/cm105.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["main.pdf", "main.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
